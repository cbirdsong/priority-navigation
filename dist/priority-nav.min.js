/*
 * priority-nav - v1.0.15 | (c) 2022 | MIT license
 * Repository: https://github.com/gijsroge/priority-navigation.git
 * Description: Priority+ pattern navigation that hides menu items if they don't fit on screen.
 * Demo: http://gijsroge.github.io/priority-nav.js/
 */

!function(e,t){"function"==typeof define&&define.amd?define("priorityNav",t(e)):"object"==typeof exports?module.exports=t(e):e.priorityNav=t(e)}(window||this,function(e){"use strict";var c,d,s,u,l,i,p={},v=[],a=!!document.querySelector&&!!e.addEventListener,y={},h=0,m=0,f={initClass:"js-priorityNav",mainNavWrapper:"nav",mainNav:"ul",navDropdownClassName:"",navDropdownToggleClassName:"",navDropdownLabel:"More",navDropdownIcon:"",navDropdownBreakpointLabel:"Menu",navDropdownBreakpointIcon:"",breakPoint:500,throttleDelay:50,offsetPixels:0,count:!0,moved:function(){},movedBack:function(){}},w=function(e,t,o){if("[object Object]"===Object.prototype.toString.call(e))for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(o,e[n],n,e);else for(var r=0,i=e.length;r<i;r++)t.call(o,e[r],r,e)};var o=function(e){var t,o,n,r,i,a,s,l;t=e,o=window.getComputedStyle(t),n=parseFloat(o.paddingLeft)+parseFloat(o.paddingRight),c=t.clientWidth-n,e.querySelector(u).parentNode===e?e.querySelector(u).offsetWidth:0,d=L(e)+y.offsetPixels,m=(r=document,i=window,a=r.compatMode&&"CSS1Compat"===r.compatMode?r.documentElement:r.body,s=a.clientWidth,l=a.clientHeight,i.innerWidth&&s>i.innerWidth&&(s=i.innerWidth,l=i.innerHeight),{width:s,height:l}).width};p.doesItFit=function(t){var n,r,i,a,e=0===t.getAttribute("instance")?e:y.throttleDelay;0,n=function(){var e=t.getAttribute("instance");for(o(t);c<=d&&0<t.querySelector(s).children.length||m<y.breakPoint&&0<t.querySelector(s).children.length;)p.toDropdown(t,e),o(t),m<y.breakPoint&&q(t,e,y.navDropdownBreakpointLabel,y.navDropdownBreakpointIcon);for(;c>=v[e][v[e].length-1]&&m>y.breakPoint;)p.toMenu(t,e),m>y.breakPoint&&q(t,e,y.navDropdownLabel,y.navDropdownIcon);v[e].length<1&&(t.querySelector(u).classList.remove("show"),q(t,e,y.navDropdownLabel,y.navDropdownIcon)),t.querySelector(s).children.length<1?(t.classList.add("is-empty"),t.querySelector(u).classList.add("is-full"),t.querySelector(l).classList.add("is-full"),q(t,e,y.navDropdownBreakpointLabel,y.navDropdownBreakpointIcon)):(t.classList.remove("is-empty"),t.querySelector(u).classList.remove("is-full"),t.querySelector(l).classList.remove("is-full")),S(t,e)},r=e,function(){var e=this,t=arguments,o=i&&!a;clearTimeout(a),a=setTimeout(function(){a=null,i||n.apply(e,t)},r),o&&n.apply(e,t)}()};var S=function(e,t){v[t].length<1?(e.querySelector(l).classList.add("priority-nav-is-hidden"),e.querySelector(l).classList.remove("priority-nav-is-visible"),e.classList.remove("priority-nav-has-dropdown"),e.querySelector(".priority-nav__wrapper").setAttribute("aria-haspopup","false")):(e.querySelector(l).classList.add("priority-nav-is-visible"),e.querySelector(l).classList.remove("priority-nav-is-hidden"),e.classList.add("priority-nav-has-dropdown"),e.querySelector(".priority-nav__wrapper").setAttribute("aria-haspopup","true"))},n=function(e,t){e.querySelector(l).setAttribute("priorityNav-count",v[t].length)},q=function(e,t,o,n){e.querySelector(l).setAttribute("aria-label",o),e.querySelector(l).innerHTML="<span class='label'>"+o+"</span>"+n};p.toDropdown=function(e,t){e.querySelector(u).firstChild&&0<e.querySelector(s).children.length?e.querySelector(u).insertBefore(e.querySelector(s).lastElementChild,e.querySelector(u).firstChild):0<e.querySelector(s).children.length&&e.querySelector(u).appendChild(e.querySelector(s).lastElementChild),v[t].push(d),S(e,t),0<e.querySelector(s).children.length&&y.count&&n(e,t),y.moved()},p.toMenu=function(e,t){0<e.querySelector(u).children.length&&e.querySelector(s).appendChild(e.querySelector(u).firstElementChild),v[t].pop(),S(e,t),0<e.querySelector(s).children.length&&y.count&&n(e,t),y.movedBack()};var L=function(e){for(var t=e.childNodes,o=0,n=0;n<t.length;n++)3!==t[n].nodeType&&(isNaN(t[n].offsetWidth)||(o+=t[n].offsetWidth));return o};Element.prototype.remove=function(){this.parentElement.removeChild(this)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var e=0,t=this.length;e<t;e++)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])},p.destroy=function(){y&&(document.documentElement.classList.remove(y.initClass),i.remove(),y=null,delete p.init,delete p.doesItFit)},a&&"undefined"!=typeof Node&&(Node.prototype.insertAfter=function(e,t){this.insertBefore(e,t.nextSibling)});var g=function(e){var t=e.charAt(0);return"."!==t&&"#"!==t};return p.init=function(e){var o,n,r;if(n=e||{},r={},w(o=f,function(e,t){r[t]=o[t]}),w(n,function(e,t){r[t]=n[t]}),y=r,a||"undefined"!=typeof Node)if(g(y.navDropdownClassName)&&g(y.navDropdownToggleClassName)){var t=document.querySelectorAll(y.mainNavWrapper);w(t,function(e){var t;(v[h]=[],e.setAttribute("instance",h++),e)?(s=y.mainNav,e.querySelector(s)?(function(e,t){i=document.createElement("span"),u=document.createElement("ul"),l=document.createElement("button");var o='<span class="label">'+t.navDropdownLabel+"</span>"+t.navDropdownIcon;l.innerHTML=o,l.setAttribute("aria-controls","menu"),l.setAttribute("type","button"),u.setAttribute("aria-hidden","true"),e.querySelector(s).parentNode===e?(e.insertAfter(i,e.querySelector(s)),i.appendChild(l),i.appendChild(u),u.classList.add(t.navDropdownClassName),u.classList.add("priority-nav__dropdown"),l.classList.add(t.navDropdownToggleClassName),l.classList.add("priority-nav__dropdown-toggle"),l.setAttribute("type","button"),i.classList.add(t.navDropdownClassName+"-wrapper"),i.classList.add("priority-nav__wrapper"),e.classList.add("priority-nav")):console.warn("mainNav is not a direct child of mainNavWrapper, double check please")}(e,y),u="."+y.navDropdownClassName,e.querySelector(u)?(l="."+y.navDropdownToggleClassName,e.querySelector(l)?(t=e,window.attachEvent?window.attachEvent("onresize",function(){p.doesItFit&&p.doesItFit(t)}):window.addEventListener&&window.addEventListener("resize",function(){p.doesItFit&&p.doesItFit(t)},!0),t.querySelector(l).addEventListener("click",function(){this.classList.toggle("is-open"),t.querySelector(u).classList.toggle("show"),1==t.querySelector(u).getAttribute("aria-hidden")?t.querySelector(u).setAttribute("aria-hidden","false"):(t.querySelector(u).setAttribute("aria-hidden","true"),t.querySelector(u).blur())}),document.addEventListener("click",function(e){e.target.closest(".priority-nav__wrapper")||(t.querySelector(u).classList.remove("show"),t.querySelector(l).classList.remove("is-open"),t.classList.remove("is-open"))}),document.onkeydown=function(e){27===(e=e||window.event).keyCode&&(document.querySelector(u).classList.remove("show"),document.querySelector(l).classList.remove("is-open"),t.classList.remove("is-open"))},p.doesItFit(e)):console.warn("couldn't find the specified navDropdownToggle element")):console.warn("couldn't find the specified navDropdown element")):console.warn("couldn't find the specified mainNav element")):console.warn("couldn't find the specified mainNavWrapper element")}),0,document.documentElement.classList.add(y.initClass)}else console.warn("No symbols allowed in navDropdownClassName & navDropdownToggleClassName. These are not selectors.");else console.warn("This browser doesn't support priorityNav")},p});